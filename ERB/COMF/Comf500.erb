@COM500
RETURN 0

@USE_ARUKANA_TRAIN
#DIM LCOUNT
VARSET LOCAL

FOR LCOUNT, 230, 230 + NUM("存在するアルカナ")
	TRYCALLFORM COM_ABLE{LCOUNT}_2
	LOCAL:LCOUNT = RESULT
NEXT

;バインドは通常の詠唱はひとまず禁止
LOCAL:240 = 0

PRINTL どれを唱えますか？（魔法使いは消費精力が少なくなります）
FOR LCOUNT, 0, NUM("存在するアルカナ")
	LOCAL = LCOUNT + 230
	;バインドは禁止
	SIF LOCAL == 240
		CONTINUE
	;詠唱者がいる
	IF LOCAL:LOCAL
		PRINTFORM  [{LCOUNT, 2}] 
	ELSE
		SETCOLOR DEF_COLOR("灰色")
		PRINTFORM  [×] 
	ENDIF
	PRINTFORML %TEXT_LJ(TALENTNAME:LOCAL, 12)% %TEXTS("アルカナ解説", LOCAL)%
	RESETCOLOR
NEXT
PRINTFORML [100] 戻る

$INPUT_LOOP
INPUT

IF RESULT == 100
	RETURN 0
ELSEIF RESULT >= 0 && RESULT < NUM("存在するアルカナ")
	IF LOCAL:(230 + RESULT)
		SELECTCOM = 230 + RESULT
	ELSE
		PRINTFORML このアルカナを唱えてくれる人が居ないようです
		GOTO INPUT_LOOP
	ENDIF
ELSE
	GOTO INPUT_LOOP
ENDIF
