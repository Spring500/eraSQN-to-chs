@COM506
;酔い

PRINTFORML %CALLNAME:PLAYER%は酔っ払っている！

CALL TRAIN_MESSAGE_B

SIF REFUSE_CHECK()
	RETURN 0

STR:0 = 酔い

RETURN 1

@FLAG_COM506, ARG
;マシな反応
IF TFLAG:16
	SIF ASSIPLAY == 0
		TFLAG:30 += 1
ELSE
	TFLAG:33 -= 10
	SIF ASSIPLAY == 0
		TFLAG:30 -= 3
ENDIF

@SOURCE_COM506, ARG
VARSET LOCAL

LOCAL:20 += 0
LOCAL:21 += 50

;マシな反応
IF TFLAG:16
	LOCAL:3 += LOCAL:30
	LOCAL:16 += LOCAL:30
	LOCAL:11 += LOCAL:30 / 2
ELSE
	LOCAL:21 += 90
ENDIF

CALL CALC, "調教ソース", LOCAL:0, LOCAL:1, LOCAL:2, LOCAL:3, LOCAL:4, LOCAL:5, LOCAL:6, LOCAL:7, LOCAL:8, LOCAL:9, LOCAL:10, LOCAL:11, LOCAL:12, LOCAL:13, LOCAL:14, LOCAL:15, LOCAL:16, LOCAL:17, LOCAL:18, LOCAL:19, LOCAL:20, LOCAL:21, ARG


@TRAIN_MESSAGE_COM506
;TFLAG:16 > 0で成功…のような展開。
TFLAG:16 = 0
IF RAND:5 == 0
	PRINTFORM %CALLNAME:PLAYER%は%CALLNAME:TARGET%
	IF TALENT:相思相愛 == 0 && RAND:3 == 0
		PRINTFORMW にプロポーズした！
	ELSEIF TALENT:相思相愛 == 0 && RAND:2 == 0
		PRINTFORMW を口説きはじめた！
	ELSE
		PRINTFORMW を褒めちぎった！
	ENDIF
	IF CFLAG:2/30 > RAND:100
		PRINTFORMW %CALLNAME:TARGET%は喜んでいる！
		TFLAG:16 = 1
	ELSE
		PRINTFORMW %CALLNAME:TARGET%はあきれている！
	ENDIF
ELSEIF RAND:4 == 0
	PRINTFORMW %CALLNAME:PLAYER%は%CALLNAME:TARGET%に抱きついた！
	IF CFLAG:2/30 > RAND:100
		PRINTFORMW %CALLNAME:TARGET%は喜んでいる！
		TFLAG:16 = 1
	ELSE
		PRINTFORMW %CALLNAME:TARGET%は思わず振り払った！
	ENDIF
ELSEIF RAND:3 == 0
	PRINTFORMW %CALLNAME:PLAYER%は寝そうになってしまった…
	IF CFLAG:2/30 > RAND:100
		PRINTFORMW %CALLNAME:TARGET%は%CALLNAME:PLAYER%をそっと抱いてきた…
		TFLAG:16 = 1
	ELSE
		PRINTFORMW %CALLNAME:TARGET%はあきれている！
	ENDIF
ELSEIF RAND:2 == 0
	PRINTFORMW %CALLNAME:PLAYER%は%CALLNAME:TARGET%に見蕩れてしまった……
	SIF CFLAG:2/30 > RAND:100
		TFLAG:16 = 1
ELSE
	PRINTFORMW %CALLNAME:PLAYER%は少し気分が悪くなってきた……
	SIF CFLAG:2/30 > RAND:100
		TFLAG:16 = 1
ENDIF

SIF TFLAG:16 == 0
	PRINTFORMW (ムードが下がりました)

