@COM135
;口枷
PRINTL 口枷

CALL TRAIN_MESSAGE_B

SIF REFUSE_CHECK()
	RETURN 0

IF TEQUIP:口枷 == 2
	STR:0 = リングギャグ
ELSEIF TEQUIP:口枷
	STR:0 = ボールギャグ
ELSE
	STR:0 = 口枷
ENDIF

RETURN 1

@TRAIN_MESSAGE_COM135
;ボールギャグの着脱
IF TEQUIP:口枷
	IF TEQUIP:口枷 == 1
		PRINTFORMW %CALLNAME:TARGET%からボールギャグを取ってやった
	ELSEIF TEQUIP:口枷 == 2
		PRINTFORMW %CALLNAME:TARGET%からリングギャグを取ってやった
	ENDIF
	TEQUIP:口枷 = 0
ELSE
	PRINTFORML どちらで%CALLNAME:TARGET%の口を塞ぎますか？
	PRINTL  [ 0] ボールギャグ
	PRINTL  [ 1] リングギャグ
	PRINTL [100] 戻る
	CALL INPUT_SELECT, 2, 100
	IF RESULT == 100
		TFLAG:14 = 1
	ELSEIF RESULT == 0
		TEQUIP:口枷 = 1
		PRINTFORMW %CALLNAME:TARGET%にボールギャグを嵌めさせた
	ELSEIF RESULT == 1
		TEQUIP:口枷 = 2
		PRINTFORMW %CALLNAME:TARGET%にリングギャグを嵌めて、口を開きっぱなしにさせた…
	ENDIF
ENDIF

@FLAG_COM135, ARG

@SOURCE_COM135, ARG
VARSET LOCAL

;緊縛経験が高いと消費減少
SELECTCASE EXP:束缚经验
CASE IS < EXPLV:3
	LOCAL:20 += 30
	LOCAL:21 += 50
CASE IS < EXPLV:4
	LOCAL:20 += 20
	LOCAL:21 += 30
CASEELSE
	LOCAL:20 += 10
	LOCAL:21 += 20
ENDSELECT

LOCAL:6 = 50
LOCAL:7 = 50
LOCAL:12 = 80
LOCAL:13 = 150
LOCAL:14 = 80
LOCAL:16 = 80

CALL SOURCE_SMPLAY, "口枷", ARG

CALL CALC, "調教ソース", LOCAL:0, LOCAL:1, LOCAL:2, LOCAL:3, LOCAL:4, LOCAL:5, LOCAL:6, LOCAL:7, LOCAL:8, LOCAL:9, LOCAL:10, LOCAL:11, LOCAL:12, LOCAL:13, LOCAL:14, LOCAL:15, LOCAL:16, LOCAL:17, LOCAL:18, LOCAL:19, LOCAL:20, LOCAL:21, ARG


@EQUIP_COM45
SIF SELECTCOM == 135
	RETURN 0
;ボールギャグ装備中
CALL SOURCE_COM135, 20

@EQUIP_COM45_2
SIF SELECTCOM == 135
	RETURN 0
;ボールギャグ装備中
IF TEQUIP:口枷 == 1
	PRINTL ＜ボールギャグ装備中＞
ELSEIF TEQUIP:口枷 == 2
	PRINTL ＜リングギャグ装備中＞
ENDIF
EXP:束缚经验 += 1
PRINTL 緊縛経験＋１
