@COM160
;助手を犯す
CALL PRINT_TRAIN_NAME(SELECTCOM)

CALL TRAIN_MESSAGE_B

SIF REFUSE_CHECK()
	RETURN 0

STR:0 = %STR:2%

;-------------------------------------------------
;射精チェック
;-------------------------------------------------
LOCAL = TARGET

TARGET = ASSI
SELECTCOM = 61
CALL SAMEN_CHECK

TARGET = LOCAL
SELECTCOM = 160


RETURN 1

@FLAG_COM160, ARG
IF TALENT:ASSI:処女
	CALL SETFLAG, "処女喪失フラグ", ASSI
	CALL SETFLAG, "処女簒奪フラグ", PLAYER
ENDIF
IF TALENT:PLAYER:童貞
	CALL SETFLAG, "童貞狩りフラグ", ASSI
	CALL SETFLAG, "童貞喪失フラグ", PLAYER
ENDIF
;主人のＰ⇔助手のＶの汚れが移動
CALL EQ_STAIN, MASTER, ASSI, 2, 3

@SOURCE_COM160, ARG
VARSET LOCAL

LOCAL:20 += 0
LOCAL:21 += 250

LOCAL:3 = 1500
LOCAL:14 = 800

;ABL:欲望をみる
SELECTCASE ABL:欲望
CASE 0
	LOCAL:11 = 100
	LOCAL:13 = 3200
CASE 1
	LOCAL:11 = 200
	LOCAL:13 = 3800
CASE 2
	LOCAL:11 = 350
	LOCAL:13 = 4600
CASE 3
	LOCAL:11 = 600
	LOCAL:13 = 5400
CASE 4
	LOCAL:11 = 850
	LOCAL:13 = 6200
CASEELSE
	LOCAL:11 = 1200
	LOCAL:13 = 7000
ENDSELECT

;ABL:奉仕精神をみる
SELECTCASE ABL:奉仕精神
CASE 0
	TIMES LOCAL:3 , 0.10
	TIMES LOCAL:11 , 0.50
CASE 1
	TIMES LOCAL:3 , 0.40
	TIMES LOCAL:11 , 0.80
CASE 2
	TIMES LOCAL:3 , 0.70
	TIMES LOCAL:11 , 1.00
CASE 3
	TIMES LOCAL:3 , 1.00
	TIMES LOCAL:11 , 1.50
CASE 4
	TIMES LOCAL:3 , 1.60
	TIMES LOCAL:11 , 2.00
CASEELSE
	TIMES LOCAL:3 , 2.00
	TIMES LOCAL:11 , 2.50
ENDSELECT

CALL CALC, "調教ソース", LOCAL:0, LOCAL:1, LOCAL:2, LOCAL:3, LOCAL:4, LOCAL:5, LOCAL:6, LOCAL:7, LOCAL:8, LOCAL:9, LOCAL:10, LOCAL:11, LOCAL:12, LOCAL:13, LOCAL:14, LOCAL:15, LOCAL:16, LOCAL:17, LOCAL:18, LOCAL:19, LOCAL:20, LOCAL:21, ARG


@TRAIN_MESSAGE_COM160
;前回の調教が助手を犯すであり、抜かないフラグがある場合
IF PREVCOM == SELECTCOM
	PRINTFORMW %CALLNAME:TARGET%に見せつけながら、%CALLNAME:ASSI%を犯し続けた…
ELSE
	PRINTFORM %CALLNAME:TARGET%に見せつけながら、%CALLNAME:ASSI%の
	IF TALENT:ASSI:処女 == 1
		PRINT 初めてを
	ELSE
		PRINT ヴァギナを
	ENDIF
	PRINTW 貫いていった…
ENDIF
