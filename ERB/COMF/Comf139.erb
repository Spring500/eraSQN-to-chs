@COM139
;何もしない
CALL PRINT_TRAIN_NAME(SELECTCOM)

CALL TRAIN_MESSAGE_B

SIF REFUSE_CHECK()
	RETURN 0

STR:0 = %STR:2%

RETURN 1


@FLAG_COM139, ARG
;全員の絶頂ゲージが3000か最大値の半分ぐらいか下がる
BASE:绝顶 = LIMIT(BASE:绝顶 - MAX(MAXBASE:绝顶/2, 3000), 0, BASE:绝顶*3/4)
BASE:MASTER:绝顶 = LIMIT(BASE:MASTER:绝顶 - MAX(MAXBASE:MASTER:绝顶/2, 3000), 0, BASE:MASTER:绝顶*3/4)
SIF ASSI
	BASE:ASSI:绝顶 = LIMIT(BASE:ASSI:绝顶 - MAX(MAXBASE:ASSI:绝顶/2, 3000), 0, BASE:ASSI:绝顶*3/4)
IF INSERT("インサート")

ELSEIF INSERT("挿入中")

ELSEIF TEQUIP:束缚 + TEQUIP:眼罩

ELSEIF TEQUIP:沐浴Play
	;汚れを初期化
	CALL RESET_STAIN_EX, "全部", MASTER
	CALL RESET_STAIN_EX, "全部", TARGET
	;助手がいる場合は、助手もきれいに
	SIF ASSI
		CALL RESET_STAIN_EX, "全部", ASSI
ENDIF

@SOURCE_COM139, ARG
VARSET LOCAL

LOCAL:20 -= 30
LOCAL:21 -= 30

CALL CALC, "調教ソース", LOCAL:0, LOCAL:1, LOCAL:2, LOCAL:3, LOCAL:4, LOCAL:5, LOCAL:6, LOCAL:7, LOCAL:8, LOCAL:9, LOCAL:10, LOCAL:11, LOCAL:12, LOCAL:13, LOCAL:14, LOCAL:15, LOCAL:16, LOCAL:17, LOCAL:18, LOCAL:19, LOCAL:20, LOCAL:21, ARG


@TRAIN_MESSAGE_COM139
PRINTFORM %CALLNAME:PLAYER%は
IF INSERT("インサート")
	;騎乗位中
	IF INSERT("騎乗位")
		PRINTFORMW 自分に跨って腰を振っている%CALLNAME:TARGET%を眺めながら休憩した
		CALL TEXT, "追加地の文：騎乗位"
	ELSE
		PRINTFORMW 腰の動きを止めて、休憩する事にした
	ENDIF
ELSEIF INSERT("挿入中")
	IF INSERT("騎乗位", PLAYER)
		PRINTFORMW %CALLNAME:TARGET%を押し倒した体勢で腰を止めて、顔を見下ろしつつ休憩した
	ELSE
		PRINTFORMW 身体の力を抜いて、%CALLNAME:TARGET%に犯されながらではあるが休憩を提案してみた
	ENDIF
ELSEIF TEQUIP:束缚 + TEQUIP:眼罩
	PRINTFORMW 自由に動けない%CALLNAME:TARGET%を%TEXTR("尻目に", "眺めながら")%休憩した
ELSEIF TEQUIP:沐浴Play
	PRINTFORMW %CALLNAME:TARGET%と一緒に湯船に浸かって休憩した
ELSE
	PRINTFORMW 何もせずに休憩した
ENDIF
